# ============================================================================
# 监控系统 Aggregator 配置文件
# 
# 说明: 中心节点（Windows）使用此配置文件
# 位置: ops/monitor/config.yaml
# ============================================================================

# ----------------------------------------------------------------------------
# 数据库配置
# ----------------------------------------------------------------------------
database:
  # SQLite 数据库文件路径（相对于项目根目录或绝对路径）
  path: "ops/monitor/data/monitor.db"
  
  # 连接池配置
  pool_size: 5
  
  # 查询超时（秒）
  timeout: 30

# ----------------------------------------------------------------------------
# API 服务配置
# ----------------------------------------------------------------------------
api:
  # 监听地址（0.0.0.0 允许外部访问）
  host: "0.0.0.0"
  
  # 监听端口
  port: 8080
  
  # CORS 允许的源（前端地址）
  cors_origins:
    - "http://localhost:8080"
    - "http://127.0.0.1:8080"
  
  # 管理接口 Token（用于保护 POST/PUT/DELETE 操作）
  # 生产环境请修改为随机字符串
  admin_token: "CHANGE_ME_IN_PRODUCTION"

# ----------------------------------------------------------------------------
# 前端配置
# ----------------------------------------------------------------------------
frontend:
  # 静态文件目录路径
  path: "ops/monitor/frontend"
  
  # 是否启用静态文件托管
  enabled: true

# ----------------------------------------------------------------------------
# 采集配置
# ----------------------------------------------------------------------------
collector:
  # 采集间隔（秒）
  interval: 5
  
  # HTTP 请求超时（秒）
  timeout: 2
  
  # 连接失败重试次数
  retry_count: 2
  
  # 重试间隔（秒）
  retry_delay: 1

# ----------------------------------------------------------------------------
# 聚合配置
# ----------------------------------------------------------------------------
aggregator:
  # 聚合周期（小时）
  period_hours: 1
  
  # 是否在整点执行聚合
  align_to_hour: true

# ----------------------------------------------------------------------------
# 数据保留策略
# ----------------------------------------------------------------------------
retention:
  # 历史数据保留天数
  days: 30
  
  # 清理任务执行时间（每天凌晨 3 点）
  cleanup_hour: 3

# ----------------------------------------------------------------------------
# 备份配置
# ----------------------------------------------------------------------------
backup:
  # 备份目录
  path: "ops/monitor/backup"
  
  # 备份保留天数
  retention_days: 7
  
  # 备份执行时间（每天凌晨 4 点）
  backup_hour: 4

# ----------------------------------------------------------------------------
# 日志配置
# ----------------------------------------------------------------------------
logging:
  # 日志级别：DEBUG, INFO, WARNING, ERROR
  level: "INFO"
  
  # 日志文件路径（留空则只输出到控制台）
  file: "logs/monitor-aggregator/aggregator.log"
  
  # 日志轮转大小（MB）
  max_size_mb: 50
  
  # 保留的日志文件数
  backup_count: 5
